# 📄 정규화와 트랜젝션 _ 2023.01.13

## ERD와 정규화 과정

### 🟨 ERD
* ERD(Entity Relationship Diagram)는 DB 구축시 가장 기초적인 뼈대 역할을 한다. 
* 릴레이션 간의 관계를 정의한 것.
* 백엔드가 맨날 만드는 그 표..
* 관계형 구조로 표현할 수 있는 데이터를 구성하는 데 유용 / 미리 정의되지 않은 비정형 데이터는 충분히 표현할 수 없다.

### 🟨 정규화과정
* 릴레이션 간의 잘못된 종속관계로 인해 발생하는 문제를 해결하는 것 (회원이 한개의 등급을 가져야 하는데 여러 개를 갖는 것)
* 저장 공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분리하는 것
* 정규화 과정은 정규형 원칙을 기반으로 정규형을 만들어 가는 과정
* 정규화된 정도는 정규형(NF, Normal Form)으로 표현
* 기본 정규형 - 제1, 제2, 제3정규형, 보이스/코드 정규형
* 고급 정규형 - 제4, 제5정규형

#### 🔸 정규형원칙
    같은 의미를 표현하는 릴레이션이지만 좀 더 좋은 구조로 만들어야 하고, 
    자료의 중복성은 감소해야 하며, 
    독립적인 관계는 별개의 릴레이션으로 표현해야 하며
    각각의 릴레리션은 독립적인 표현이 가능해야 한다.

#### 🔸 제1정규형
    모든 도메인이 더 이상 분해될 수 없는 원자 값 atomic value만으로 구성되어야 한다.

#### 🔸 제2정규형
    릴레이션이 이미 제 1정규형을 만족한 상태여야 한다.
    부분 함수의 종속성을 제거한 형태를 말한다.
    기본키를 제외한 나머지 속성이 기본키에 완전 함수 종속적인 것
    릴레이션을 분해할 때에는 동등하게 분해되어야 하고, 정보 손실이 발생하지 않아야 한다.

#### 🔸 제3정규형
    제 2 정규형을 만족한 상태여야 한다.
    기본키를 제외한 모든 속성이 이행적 함수 종속을 만족하지 않는 상태! 말이 너무 어렵다!!
    이행적 함수 종속 : A -> B와 B -> C가 존재하면 논리적으로 A -> C가 성립한다.
    이 때, 집합 C가 집합 A에 이행적으로 함수 종속되었다 라고 한다.


#### 🔸 보이스/코드 정규형
    제 3정규형이고, 결정자가 후보키가 아닌 함수 종속 관계를 제거하여 
    릴레이션의 함수종속 관계에서 모든 결정자가 후보키인 상태를 말한다.

## 트랜잭션과 무결성

### 🟨 트랜잭션
* 트랜잭션은 DB에서 하나의 논리적 기능을 수행하기 위한 작업의 단위
* 여러 개의 쿼리들을 하나로 묶는 단위
* 특징 : 원자성, 일관성, 독립성, 지속성 = ACID 특징이라고 한다.

#### 🔸 원자성(atomicity)
    "all or nothing"

* 원자성은 트랜잭션과 관련된 일이 모두 수행되었거나, 되지 않았거나를 보장하는 것.

#### 🔸 일관성(consistency)


#### 🔸 격리성(isolation)

#### 🔸 지속성(durability)

### 🟨 무결성